<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>测试konva使用一个layer 加载多个image（pdf 转图片）的demo, 测试konva 画布缩放特点，stage 外面容器不变，内部宽高自行缩放,如何实现多个文档，点击之后实现具体一个模板 </title>
<meta name='viewport' content='width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no'/>
<meta name="description" content="">
<meta name="keywords" content="">
<link href="" rel="stylesheet">
<script src="https://unpkg.com/konva@4.0.18/konva.min.js"></script>
<style>
    *{
        padding:0;
        margin:0;
    }
    body{
        position: relative;
    }
    button{
        position: absolute;
        left:20px;
        top:100px;
        z-index:100;
    }
</style>
</head>
<body>
    <button class="download">下载</button>
    <div id="container">
        
    </div>
</body>
<script>
        document.querySelector('.download').onclick=function(){
            
            konvaImage.toCanvas().toImage({
                callback(){
                    //如何保存Image图片和区域对应的remarkLayer。
                    const link=document.createElement('a')
                    // link.style.display='none'    
                    link.download=true
                    document.body.append(link)
                    link.click()
                }
            })
          
       }
      var stage = new Konva.Stage({
            container: "container",
            width: window.innerWidth,
            height: window.innerHeight,
            draggable:true
      });

      //layer 不可以加载layer
      const layer1=new Konva.Layer({
          id:'bg_layer',
      })

      var layer2=new Konva.Layer({
          id:'remark_layer',

      })

      stage.add(layer1)
      var image=new Image()
      image.src='./1.jpg'
        var konvaImage=new Konva.Image({
          image:image,
          x:window.innerWidth/4,
      
        //   width:window.innerWidth,
        //   height:window.innerHeight,
        })
      image.onload=function(){
        konvaImage=new Konva.Image({
          image:image,
        //   x:window.innerWidth/4,
          width:800,
          height:900
        })
        var scale=image.width/window.innerWidth*2;
        // console.log(scale)
        // stage.scale({x:scale,y:scale})
        layer1.add(konvaImage)
        // layer1.add(new Konva.Image({
        //   x:window.innerWidth/4,
        //   image:image
        // }))

        layer1.draw()
      }

      var circle=new Konva.Circle({
          radius:400,
          x:500,
          y:500,
          fill:'red',
      })

      layer2.add(circle)
      stage.add(layer2)


    //   setTimeout(() => {
    //       stage.scale({x:0.3,y:0.3})
    //   }, 5000);
 
</script>
</html>